# CLAUDE.md - Supply Chain B2B SaaS MVP

## ğŸš€ Project Status: **PRODUCTION LIVE** âœ…

**Platform**: Live at `http://finkargo.ai` (HTTPS pending SSL provisioning)  
**Frontend**: Next.js 14 with complete business intelligence suite  
**Backend**: Flask API with comprehensive analytics endpoints  
**Deployment**: Production-ready with DevOps infrastructure  
**Status**: Full-stack supply chain intelligence platform operational

## Repository Overview

Supply Chain B2B SaaS MVP - a comprehensive, AI-powered supply chain intelligence platform built with Next.js 14 and Flask. Features include 15 advanced business intelligence components covering sales, financial, and supply chain analytics with real-time visualizations, predictive modeling, interactive dashboards, and revolutionary "Living Interface" organic animations.

**Live Platform**: `http://finkargo.ai` ğŸŒ

## ğŸ¯ Business Intelligence Coverage - COMPLETE

### **Q1: Sales Intelligence - "What am I selling, to whom, where and how much?"**
**Coverage**: **90%+ ACHIEVED** âœ…
- âœ… Customer Segmentation Analysis with filtering and growth tracking
- âœ… Geographic Sales Visualization with SVG maps and market penetration
- âœ… AI-Powered Pricing Optimization with elasticity modeling
- âœ… Market Intelligence & Competitor Analysis
- âœ… Sales Forecasting with multiple scenario planning

### **Q2: Financial Intelligence - "What's the real cost of my inventory and how is my cash flow trapped?"** 
**Coverage**: **95%+ ACHIEVED** âœ…
- âœ… Cash Conversion Cycle Analysis with visual timeline
- âœ… Trapped Cash Root Cause Analysis with actionable recommendations
- âœ… Payment Terms Impact Calculator with scenario simulation
- âœ… Working Capital Simulator with seasonal variations
- âœ… Financial Drill-Down Analytics with hierarchical metrics

### **Q3: Supply Chain Intelligence - "When do I need to purchase from which supplier, and how healthy is my supply chain?"**
**Coverage**: **90%+ ACHIEVED** âœ…
- âœ… AI-Powered Predictive Reordering with batch processing
- âœ… Supplier Health Scoring System with performance monitoring
- âœ… Lead Time Intelligence & Optimization with disruption monitoring
- âœ… Multi-Supplier Comparison Tool with custom scoring
- âœ… Supply Chain Risk Visualization with heatmaps and mitigation

## ğŸ—ï¸ Production Architecture

### **Frontend Stack (Next.js 14)**
- **Framework**: Next.js 14 with App Router and TypeScript
- **UI Library**: React 18 with Framer Motion for organic animations
- **Styling**: Tailwind CSS v3 with responsive design system
- **Components**: Radix UI for accessibility compliance
- **Authentication**: Clerk multi-tenant organization management
- **Deployment**: Vercel with optimized bundle (87.8KB shared JS)

### **Backend Stack (Flask)**
- **Framework**: Flask with SQLAlchemy ORM
- **Database**: PostgreSQL (production) / SQLite (development)
- **AI Integration**: Agent Astra for document intelligence
- **Authentication**: Clerk JWT validation with organization scoping
- **Deployment**: Railway with Gunicorn (2 workers, 120s timeout)
- **Monitoring**: Comprehensive health endpoints and logging

### **DevOps Infrastructure** ğŸ”§
- **Deployment Scripts**: Zero-downtime deployment with health checks
- **Monitoring System**: Real-time health monitoring with multi-channel alerts
- **Backup Strategy**: Encrypted backups with cloud storage and retention
- **Rollback Procedures**: Emergency recovery and disaster protocols
- **Domain**: Custom domain `finkargo.ai` with SSL certificate provisioning

## ğŸ“¦ Complete Component Architecture

```
src/components/
â”œâ”€â”€ Sales Intelligence (Q1)/
â”‚   â”œâ”€â”€ CustomerSegmentation.tsx     # Interactive analysis, filtering, growth tracking
â”‚   â”œâ”€â”€ GeographicSalesMap.tsx       # SVG map, regional analytics, market penetration
â”‚   â”œâ”€â”€ PricingOptimization.tsx      # AI pricing engine, elasticity modeling
â”‚   â”œâ”€â”€ MarketAnalysis.tsx           # Competitor analysis, market intelligence
â”‚   â””â”€â”€ SalesForecasting.tsx         # AI forecasting, multiple scenarios
â”œâ”€â”€ Financial Intelligence (Q2)/
â”‚   â”œâ”€â”€ CashConversionCycle.tsx      # Cash flow timeline, optimization opportunities
â”‚   â”œâ”€â”€ TrappedCashAnalysis.tsx      # Root cause analysis, actionable recommendations
â”‚   â”œâ”€â”€ PaymentTermsCalculator.tsx   # Impact simulation, optimization scenarios
â”‚   â”œâ”€â”€ WorkingCapitalSimulator.tsx  # Scenario modeling, seasonal variations
â”‚   â””â”€â”€ FinancialDrillDown.tsx       # Hierarchical metrics, variance analysis
â”œâ”€â”€ Supply Chain Intelligence (Q3)/
â”‚   â”œâ”€â”€ PredictiveReordering.tsx     # AI recommendations, batch processing
â”‚   â”œâ”€â”€ SupplierHealthScoring.tsx    # Performance monitoring, risk assessment
â”‚   â”œâ”€â”€ LeadTimeIntelligence.tsx     # AI analysis, disruption monitoring
â”‚   â”œâ”€â”€ SupplierComparison.tsx       # Multi-supplier analysis, custom scoring
â”‚   â””â”€â”€ SupplyChainRiskVisualization.tsx # Risk heatmaps, mitigation planning
â”œâ”€â”€ Living Interface System/
â”‚   â”œâ”€â”€ OrganicDashboard.tsx         # Main breathing dashboard
â”‚   â”œâ”€â”€ LivingScore.tsx              # Breathing score displays
â”‚   â”œâ”€â”€ FlowingTimeline.tsx          # Water-like process flow
â”‚   â”œâ”€â”€ GrowingMetrics.tsx           # Plant-like metric growth
â”‚   â””â”€â”€ MagicInteractions.tsx        # Organic interaction effects
â””â”€â”€ Infrastructure/
    â”œâ”€â”€ ui/ (Enhanced Radix UI components)
    â”œâ”€â”€ hooks/ (useAPIFetch, useBreathing, custom hooks)
    â””â”€â”€ lib/ (Enhanced API client with retry logic)
```

## ğŸš€ Quick Start Commands

### Frontend Development
```bash
# Install dependencies (use legacy peer deps for Framer Motion compatibility)
npm install --legacy-peer-deps

# Development server
npm run dev

# Build for production
npm run build

# Type checking
npm run type-check

# Linting
npm run lint
```

### Backend Development
```bash
# Activate virtual environment
source venv311/bin/activate  # On Windows: venv311\Scripts\activate

# Install dependencies
pip install -r requirements.txt

# Run development server
python main.py
```

### Key Architecture Patterns

1. **Hybrid Architecture**: Next.js frontend with Flask backend API
   - Frontend runs on port 3000 (development)
   - Backend API runs on port 5000
   - CORS configured for cross-origin requests
   - Environment variable: `NEXT_PUBLIC_API_URL` connects them

2. **Multi-Tenant Organization Support**: Clerk-based organization management
   - Organization-scoped data isolation
   - Role-based dashboards within organizations
   - Clerk organization IDs used as foreign keys
